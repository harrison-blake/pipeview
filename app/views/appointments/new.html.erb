<div id="scheduler" 
     data-slots-by-day="<%= json_escape(@slots_by_day.to_json) %>" 
     class="w-full max-w-3xl mx-auto bg-white shadow-xl rounded-2xl p-10 mt-10 space-y-8">

  <h1 class="text-3xl font-bold text-emerald-800 text-center">Schedule an Inspection</h1>

  <!-- Week Navigation Buttons -->
  <div>
    <h2 class="text-lg font-semibold text-gray-700 mb-2">Choose a Day</h2>
    <div class="flex justify-between items-center mb-4">
      <button type="button" id="prev-week" class="text-sm font-medium text-emerald-700 hover:underline">&larr; Prev Week</button>
      <button type="button" id="next-week" class="text-sm font-medium text-emerald-700 hover:underline">Next Week &rarr;</button>
    </div>
    <div class="flex flex-wrap gap-2" id="day-buttons"></div>
  </div>

  <!-- Time Slots for Selected Day -->
  <div>
    <h2 class="text-lg font-semibold text-gray-700 mb-2">Available Times</h2>
    <div id="time-slots" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"></div>
  </div>

  <!-- Appointment Form -->
  <%= form_with model: @appointment, local: true do |f| %>
    <%= f.hidden_field :preferred_time, id: "preferred_time" %>

    <div>
      <%= f.label :name, "Your Name", class: "block font-medium text-gray-700" %>
      <%= f.text_field :name, required: true, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500" %>
    </div>

    <div>
      <%= f.label :email, "Email Address", class: "block font-medium text-gray-700" %>
      <%= f.email_field :email, required: true, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500" %>
    </div>

    <div>
      <%= f.label :phone, "Phone Number", class: "block font-medium text-gray-700" %>
      <%= f.telephone_field :phone, required: true, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500" %>
    </div>

    <div class="text-center mt-6">
      <%= f.submit "Book Appointment", class: "bg-emerald-700 hover:bg-emerald-800 text-white font-semibold px-6 py-3 rounded-lg shadow transition" %>
    </div>
  <% end %>
</div>
